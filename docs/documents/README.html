<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>README | qrwc-svelte</title><meta name="description" content="Documentation for qrwc-svelte"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">qrwc-svelte</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">qrwc-svelte</a></li><li><a href="README.html">README</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="q-sys-remote-websocket-control-for-svelte" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Q-SYS Remote WebSocket Control for Svelte<a href="#q-sys-remote-websocket-control-for-svelte" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p><strong>Cybernetically enhanced Q-SYS UIs</strong></p>
<p>Note: This library is <strong>not</strong> sponsored, supported or endorsed by QSC, LLC. Q-SYS can not provide support for this library, or any issues that may arise from its use.</p>
<a id="features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ðŸš€ Lightning Fast Setup - Everything you need is built right in.</li>
<li>ðŸ“¦ Easy to use - Built for A/V programmers.</li>
<li>ðŸ’Ž Svelte 5 Runes - Makes use of the Runes API in svelte 5.</li>
<li>ðŸ“¡ Realtime Updates - Automatically updates UI when changes are made in Q-SYS.</li>
<li>ðŸ’¥ Redundant Core Support - Automatically switches to backup core if primary falls offline.</li>
<li>âœ¨ Full TypeScript Support - Better code completion and error checking.</li>
<li>âœ… Fully Open Source - No licensing fees, no restrictions.</li>
</ul>
<a id="getting-started" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting Started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="prerequisites" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Prerequisites<a href="#prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Q-SYS Designer 10.0 or later</li>
<li>Q-SYS Hardware or V-Core (QRWC not supported in emulation mode)</li>
<li>Q-SYS Components used <strong>MUST</strong> have <code>Script Access</code> property set to <code>All</code> or <code>External</code> in Q-SYS Designer.</li>
</ul>
<a id="project-creation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Project Creation<a href="#project-creation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>It is <strong>strongly recommended</strong> that you start with a plane Svelte project through Vite. (as opposed to SvelteKit - see the section on <a href="#sveltekit">SvelteKit</a> below).</p>
<p>Create a new Svelte Project with Vite:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">create</span><span class="hl-1"> </span><span class="hl-2">vite@latest</span><span class="hl-1"> </span><span class="hl-2">my-qsys-ui</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--template</span><span class="hl-1"> </span><span class="hl-2">svelte-ts</span><br/><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">my-qsys-ui</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<p>Replace <code>my-qsys-ui</code> with the name of your project.</p>
<p>At this point, you may wish to install other UI libraries or tools such as TailwindCSS and DaisyUI.</p>
<a id="installation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Install the QRWC-Svelte library:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">qrwc-svelte</span>
</code><button type="button">Copy</button></pre>

<a id="usage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="instantiating-the-qrwc-svelte-instance" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Instantiating the QRWC-Svelte Instance<a href="#instantiating-the-qrwc-svelte-instance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>It is recommended to create a file in the <code>lib</code> directory to provide the QRWC-Svelte instance to all components.</p>
<p>Create a new file in the <code>lib</code> directory called <code>svelte-qrwc.ts</code>:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">QrwcSvelte</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;qrwc-svelte&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Create a new instance of QrwcSvelte and connect to a core at 172.18.1.82</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">qrwcSvelte</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">QrwcSvelte</span><span class="hl-1">(</span><span class="hl-2">&quot;192.168.1.100&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Replace <code>192.168.1.100</code> with the IP address or hostname of your Q-SYS Core.
Additional connection options, including redundant core support is available by passing in a <code>ConnectionOptions</code> object instead of a string.</p>
<a id="checking-connection-status" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Checking Connection Status<a href="#checking-connection-status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>You wil need to make sure that QrwcSvelte is connected to the core before using any components. QrwcSvelte will automatically attempt to connect to the core when it is created.</p>
<p>QrwcSvelte provides the property <code>isConnected</code> as a <code>$state&lt;boolean&gt;</code> rune that can be used to check the connection status.</p>
<pre><code class="svelte"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">  </span><span class="hl-4">import</span><span class="hl-11"> { </span><span class="hl-5">qrwcSvelte</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&#39;./lib/svelte-qrwc&#39;</span><span class="hl-11">;</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-1">{#</span><span class="hl-4">if</span><span class="hl-11"> </span><span class="hl-5">qrwcSvelte</span><span class="hl-11">.</span><span class="hl-5">isConnected</span><span class="hl-1">}</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><span class="hl-1">Connected</span><span class="hl-8">&lt;/</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><br/><span class="hl-1">  </span><span class="hl-6">&lt;!-- Place Svelte Components here--&gt;</span><br/><span class="hl-1">{:</span><span class="hl-4">else</span><span class="hl-1">}</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><span class="hl-1">Not connected</span><span class="hl-8">&lt;/</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><br/><span class="hl-1">{/</span><span class="hl-4">if</span><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>DO NOT</strong> attempt to use any Q-SYS Controls until <code>qrwcSvelte.isConnected</code> is <code>true</code>. Controls will throw an error if the connection is not established.</p>
<a id="using-q-sys-controls" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Using Q-SYS Controls<a href="#using-q-sys-controls" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Q-SYS Controls are used by fetching the control from the QrwcSvelte instance with the appropriate use method.</p>
<p>For example, to use a button control with the component name <code>testControls</code> and control name <code>toggleButton</code>:
create a file named <code>Button.svelte</code>:</p>
<pre><code class="svelte"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">  </span><span class="hl-4">import</span><span class="hl-11"> { </span><span class="hl-5">qrwcSvelte</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&quot;./lib/qrwc-svelte&quot;</span><span class="hl-11">;</span><br/><br/><span class="hl-11">  </span><span class="hl-3">const</span><span class="hl-11"> </span><span class="hl-7">toggleButton</span><span class="hl-11"> </span><span class="hl-1">=</span><span class="hl-11"> </span><span class="hl-5">qrwcSvelte</span><span class="hl-11">.</span><span class="hl-0">useButton</span><span class="hl-11">(</span><span class="hl-2">&quot;testControls&quot;</span><span class="hl-11">, </span><span class="hl-2">&quot;toggleButton&quot;</span><span class="hl-11">);</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-8">&lt;</span><span class="hl-9">button</span><br/><span class="hl-1">  </span><span class="hl-10">style</span><span class="hl-1">=</span><span class="hl-2">&quot;background-color: </span><span class="hl-3">{</span><span class="hl-5">toggleButton</span><span class="hl-11">.</span><span class="hl-5">state</span><span class="hl-11"> </span><span class="hl-1">?</span><span class="hl-11"> </span><span class="hl-2">&#39;green&#39;</span><span class="hl-11"> </span><span class="hl-1">:</span><span class="hl-11"> </span><span class="hl-2">&#39;#777&#39;</span><span class="hl-3">}</span><span class="hl-2">;&quot;</span><br/><span class="hl-1">  </span><span class="hl-10">onclick</span><span class="hl-1">=</span><span class="hl-3">{</span><span class="hl-11">() </span><span class="hl-3">=&gt;</span><span class="hl-11"> </span><span class="hl-5">toggleButton</span><span class="hl-11">.</span><span class="hl-0">toggle</span><span class="hl-11">()</span><span class="hl-3">}</span><span class="hl-8">&gt;</span><span class="hl-1">Toggle!</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">button</span><span class="hl-8">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>In this example, the button will change color based on the state of the button control in Q-SYS. When clicked, the button will toggle the state of the button control in Q-SYS. Since the state property of the button is a <code>$state&lt;boolean&gt;</code> rune, the button will automatically update when the state changes in Q-SYS.</p>
<a id="wrapping-up" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Wrapping up<a href="#wrapping-up" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Now that you have created the button component, you can use it in your main App.svelte file:</p>
<pre><code class="svelte"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">  </span><span class="hl-4">import</span><span class="hl-11"> { </span><span class="hl-5">qrwcSvelte</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&#39;./lib/qrwc-svelte&#39;</span><span class="hl-11">;</span><br/><span class="hl-11">  </span><span class="hl-4">import</span><span class="hl-11"> </span><span class="hl-5">Button</span><span class="hl-11"> </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&#39;./Button.svelte&#39;</span><span class="hl-11">;</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-1">{#</span><span class="hl-4">if</span><span class="hl-11"> </span><span class="hl-5">qrwcSvelte</span><span class="hl-11">.</span><span class="hl-5">isConnected</span><span class="hl-1">}</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><span class="hl-1">Connected</span><span class="hl-8">&lt;/</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-12">Button</span><span class="hl-8">/&gt;</span><br/><span class="hl-1">{:</span><span class="hl-4">else</span><span class="hl-1">}</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><span class="hl-1">Not connected</span><span class="hl-8">&lt;/</span><span class="hl-9">h1</span><span class="hl-8">&gt;</span><br/><span class="hl-1">{/</span><span class="hl-4">if</span><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This makes it so that the button is not subscribed to until the connection to the core is established.</p>
<a id="q-sys-design-considerations" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Q-SYS Design Considerations<a href="#q-sys-design-considerations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All components that you wish to control with the QRWC-Svelte library must have the <code>Script Access</code> property set to <code>All</code> or <code>External</code> in Q-SYS Designer.</p>
<p><img src="../media/scriptaccess.png" alt="Script Access Property" title="Script Access Property"></p>
<p>The <code>Code Name</code> property is used as the component name in the QRWC-Svelte library.</p>
<p>Control names are used to reference individual controls inside of a component.
Q-SYS Designer provides a way to view all the control names inside a component. From the <code>Tools</code> menu. select <code>View Component Controls Info...</code> to show all the control names in a component.</p>
<p><img src="../media/componentcontrols.png" alt="Component Controls Info" title="Component Controls Info"></p>
<p>For the example above, the <code>state</code> control of the flipflop can be accessed with the <code>useButton</code> method of a QRWC-Svelte instance.</p>
<pre><code class="svelte"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">  </span><span class="hl-6">//Shared QRWC-Svelte instance - see above</span><br/><span class="hl-11">  </span><span class="hl-4">import</span><span class="hl-11"> { </span><span class="hl-5">qrwcSvelte</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&quot;./lib/qrwc-svelte&quot;</span><span class="hl-11">;</span><br/><br/><span class="hl-11">  </span><span class="hl-3">const</span><span class="hl-11"> </span><span class="hl-7">flipFlopState</span><span class="hl-11"> </span><span class="hl-1">=</span><span class="hl-11"> </span><span class="hl-5">qrwcSvelte</span><span class="hl-11">.</span><span class="hl-0">useButton</span><span class="hl-11">(</span><span class="hl-2">&quot;Flip-Flop&quot;</span><span class="hl-11">, </span><span class="hl-2">&quot;state&quot;</span><span class="hl-11">);</span>
</code><button type="button">Copy</button></pre>

<a id="connection-options" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Connection Options<a href="#connection-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>By default teh QRWC-Svelte library will attempt to connect to the core at the provided IP address. However, you can provide additional connection options by passing in a <code>ConnectionOptions</code> object instead of a string. The example, below lists the defaults for each option.</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1">: </span><span class="hl-12">ConnectionOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-5">coreIp:</span><span class="hl-1"> </span><span class="hl-2">&quot;192.168.1.100&quot;</span><span class="hl-1">,	</span><span class="hl-6">// IP/hostname of the core</span><br/><span class="hl-1">			</span><span class="hl-5">redundantCoreIp:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-6">// IP/hostname of the redundant core if present</span><br/><span class="hl-1">			</span><span class="hl-5">secure:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,				</span><span class="hl-6">// true for https/wss, false for http/ws (default)</span><br/><span class="hl-1">			</span><span class="hl-5">poleInterval:</span><span class="hl-1"> </span><span class="hl-13">35</span><span class="hl-1">,			</span><span class="hl-6">// Polling interval in milliseconds (default 35)</span><br/><span class="hl-1">			</span><span class="hl-5">controlFilter:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><span class="hl-1">,	</span><span class="hl-6">// Filter for control events (default undefined)</span><br/><span class="hl-1">		};</span>
</code><button type="button">Copy</button></pre>

<a id="core-ip-and-redundant-core-ip" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Core IP and Redundant Core IP<a href="#core-ip-and-redundant-core-ip" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If only a single core is present, the <code>coreIp</code> option should be set to the IP address or hostname of the core. If a redundant core is present, the <code>redundantCoreIp</code> option should be set to the IP address or hostname of the redundant core. If the <code>redundantCoreIp</code> option is set, the library will automatically switch to the redundant core if the primary core goes offline.</p>
<a id="secure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Secure<a href="#secure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>As of initial release of @q-sys/qrwc, authentication is not supported by the q-sys WebSocket. However, the core serves the QRWC WebSocket with both ws (non-secure) and wss (secure) protocols.</p>
<p>It is the responsibility of the developer to ensure that certificates are trusted by the client for both primary and redundant cores.</p>
<p>As of Q-SYS Designer 10.0, the core is incapable of serving the UI from the core's web server. Therefore, if the core is using a self-signed certificate, the developer must ensure that the certificate is trusted by the client, as the client will not have the opportunity to accept the core's certificate in the browser prior to loading the UI.</p>
<a id="polling-interval" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Polling Interval<a href="#polling-interval" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>pollInterval</code> option sets the interval in milliseconds at which the library will poll the core for control updates. The default is 35 milliseconds. The @q-sys/qrwc library uses a <a href="https://help.qsys.com/#External_Control_APIs/external_controls_change_groups.htm">change group (external link)</a> under the hood. It is generally recommended to leave this at the default unless you have a large number of controls that are changing frequently.</p>
<a id="control-filter" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Control Filter<a href="#control-filter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>controlFilter</code> option allows you to filter the controls that are subscribed to by the library. The control filter is an array of strings that represent the control names that the library <strong>will</strong> subscribe to. If the control filter is not provided, the library will subscribe to all controls with external script access in the Q-SYS design.</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1">: </span><span class="hl-12">ConnectionOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">		...</span><br/><span class="hl-1">	  </span><span class="hl-5">controlFilter</span><span class="hl-1">: [</span><span class="hl-2">&quot;testControls&quot;</span><span class="hl-1">,</span><span class="hl-2">&quot;myOtherControl&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Only the components with the code names <code>testControls</code> and <code>myOtherControl</code> will be subscribed to by the library. All other controls will be ignored.</p>
<blockquote>
<p><strong>WARNING</strong>:
If none of controls in the design match the control filter, the library will fail to connect to the core. Make sure that the control filter matches at least one control in the design. As long at least one control is matched, the library will connect and ignore any controls that do not match the filter.</p>
</blockquote>
<p>Optionally a filter function can be provided to the control filter. The filter function should return a boolean value based on the control. If the function returns <code>true</code>, the control will be subscribed to. If the function returns <code>false</code>, the control will be ignored.</p>
<pre><code class="typescript"><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1">: </span><span class="hl-12">ConnectionOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">			...</span><br/><span class="hl-1">			</span><span class="hl-5">controlFilter</span><span class="hl-1">: (</span><span class="hl-5">ctl</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">ctl</span><span class="hl-1">.</span><span class="hl-5">Name</span><span class="hl-1">.</span><span class="hl-0">match</span><span class="hl-1">(</span><span class="hl-14">/</span><span class="hl-15">^</span><span class="hl-14">testControl</span><span class="hl-16">[</span><span class="hl-14">0-9A-Fa-f</span><span class="hl-16">]</span><span class="hl-17">{2}</span><span class="hl-14">/</span><span class="hl-3">gm</span><span class="hl-1">) !== </span><span class="hl-3">null</span><span class="hl-1">,</span><br/><span class="hl-1">		};</span>
</code><button type="button">Copy</button></pre>

<a id="sveltekit" class="tsd-anchor"></a><h2 class="tsd-anchor-link">SvelteKit<a href="#sveltekit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>While the QRWC library can be run in either client side or server side runtimes, the QRWC-Svelte library is not compatible with server side rendering. The QRWC-Svelte library expects to be run in the client's browser.</p>
<p>It is generally easier and faster to use vanilla Svelte without SvelteKit, as the extra featured provided by SvelteKit are not usually necessary for an embedded A/V UI. However, if you wish to use SvelteKit, you will need to make sure that the QRWC-Svelte library is only run in client side code.</p>
<p>It is recommended that the QRWC-Svelte instance is created in a global layout script and provided to all child components. In this layout script, pre-rendering and SSR should be disabled as well.</p>
<p>This example +layout.ts file demonstrates how to create the QRWC-Svelte instance in a SvelteKit layout. The core's IP address is provided by an environment variable, and the QRWC-Svelte instance is provided to all child components.</p>
<pre><code class="typescript"><span class="hl-6">//src/routes/+layout.ts</span><br/><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">QrwcSvelte</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;$lib/index.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> { </span><span class="hl-5">LayoutLoad</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./$types.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">PUBLIC_COREIP</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;$env/static/public&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">browser</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;$app/environment&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">//Disable SSR and pre-rendering</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">ssr</span><span class="hl-1"> = </span><span class="hl-3">false</span><span class="hl-1">;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">prerender</span><span class="hl-1"> = </span><span class="hl-3">false</span><span class="hl-1">;</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">load</span><span class="hl-1">: </span><span class="hl-12">LayoutLoad</span><span class="hl-1"> = </span><span class="hl-3">async</span><span class="hl-1"> ({ </span><span class="hl-5">params</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">browser</span><span class="hl-1">) {</span><br/><span class="hl-1">		</span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">			</span><span class="hl-5">qrwc:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">QrwcSvelte</span><span class="hl-1">(</span><span class="hl-7">PUBLIC_COREIP</span><span class="hl-1">)</span><br/><span class="hl-1">		};</span><br/><span class="hl-1">	}</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>In order to make sure that Q-SYS controls are not subscribed to before the core is connected, we can use a global +layout.svelte file to check the connection before rendering the child components.</p>
<pre><code class="svelte"><span class="hl-6">&lt;!-- src/routes/+layout.svelte --&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">	</span><span class="hl-4">import</span><span class="hl-11"> </span><span class="hl-2">&#39;../app.css&#39;</span><span class="hl-11">;</span><br/><span class="hl-11">	</span><span class="hl-4">import</span><span class="hl-11"> </span><span class="hl-4">type</span><span class="hl-11"> { </span><span class="hl-5">LayoutData</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&#39;./$types.js&#39;</span><span class="hl-11">;</span><br/><span class="hl-11">	</span><span class="hl-4">import</span><span class="hl-11"> </span><span class="hl-4">type</span><span class="hl-11"> { </span><span class="hl-5">Snippet</span><span class="hl-11"> } </span><span class="hl-4">from</span><span class="hl-11"> </span><span class="hl-2">&#39;svelte&#39;</span><span class="hl-11">;</span><br/><span class="hl-11">	</span><br/><span class="hl-11">	</span><span class="hl-3">let</span><span class="hl-11"> { </span><span class="hl-5">data</span><span class="hl-11">, </span><span class="hl-5">children</span><span class="hl-11"> }</span><span class="hl-1">:</span><span class="hl-11"> { </span><span class="hl-5">data</span><span class="hl-1">:</span><span class="hl-11"> </span><span class="hl-12">LayoutData</span><span class="hl-11">, </span><span class="hl-5">children</span><span class="hl-1">:</span><span class="hl-11"> </span><span class="hl-12">Snippet</span><span class="hl-11"> } </span><span class="hl-1">=</span><span class="hl-11"> $</span><span class="hl-0">props</span><span class="hl-11">();</span><br/><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-1">{#</span><span class="hl-4">if</span><span class="hl-11"> </span><span class="hl-5">data</span><span class="hl-11">.</span><span class="hl-5">qrwc</span><span class="hl-11">?.</span><span class="hl-5">isConnected</span><span class="hl-1">}</span><br/><span class="hl-1">	</span><span class="hl-8">&lt;</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><span class="hl-1">Connected</span><span class="hl-8">&lt;/</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	{@</span><span class="hl-3">render</span><span class="hl-11"> </span><span class="hl-0">children</span><span class="hl-11">()</span><span class="hl-1">}</span><br/><span class="hl-1">{:</span><span class="hl-4">else</span><span class="hl-1">}</span><br/><span class="hl-1">	</span><span class="hl-8">&lt;</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><span class="hl-3">{</span><span class="hl-5">data</span><span class="hl-11">.</span><span class="hl-5">qrwc</span><span class="hl-11">?.</span><span class="hl-5">connectionStatus</span><span class="hl-3">}</span><span class="hl-8">&lt;/</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	</span><span class="hl-8">&lt;</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><span class="hl-1">Connection Attempt: </span><span class="hl-3">{</span><span class="hl-5">data</span><span class="hl-11">.</span><span class="hl-5">qrwc</span><span class="hl-11">?.</span><span class="hl-5">connectionAttemptCount</span><span class="hl-3">}</span><span class="hl-8">&lt;/</span><span class="hl-9">p</span><span class="hl-8">&gt;</span><br/><span class="hl-1">{/</span><span class="hl-4">if</span><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>At this point, you can use any Q-SYS controls in page components.</p>
<pre><code class="svelte"><span class="hl-6">&lt;!-- src/routes/+page.svelte --&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-11">	</span><span class="hl-3">let</span><span class="hl-11"> { </span><span class="hl-5">data</span><span class="hl-11"> } </span><span class="hl-1">=</span><span class="hl-11"> $</span><span class="hl-0">props</span><span class="hl-11">();</span><br/><span class="hl-11">	</span><span class="hl-3">const</span><span class="hl-11"> </span><span class="hl-7">toggleButton</span><span class="hl-11"> </span><span class="hl-1">=</span><span class="hl-11"> </span><span class="hl-5">data</span><span class="hl-11">.</span><span class="hl-5">qrwc</span><span class="hl-11">?.</span><span class="hl-0">useButton</span><span class="hl-11">(</span><span class="hl-2">&quot;testControls&quot;</span><span class="hl-11">, </span><span class="hl-2">&quot;toggleButton&quot;</span><span class="hl-11">);</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-8">&lt;</span><span class="hl-9">button</span><br/><span class="hl-1">  </span><span class="hl-10">style</span><span class="hl-1">=</span><span class="hl-2">&quot;background-color: </span><span class="hl-3">{</span><span class="hl-5">toggleButton</span><span class="hl-11">?.</span><span class="hl-5">state</span><span class="hl-11"> </span><span class="hl-1">?</span><span class="hl-11"> </span><span class="hl-2">&#39;green&#39;</span><span class="hl-11"> </span><span class="hl-1">:</span><span class="hl-11"> </span><span class="hl-2">&#39;#777&#39;</span><span class="hl-3">}</span><span class="hl-2">;&quot;</span><br/><span class="hl-1">  </span><span class="hl-10">onclick</span><span class="hl-1">=</span><span class="hl-3">{</span><span class="hl-11">() </span><span class="hl-3">=&gt;</span><span class="hl-11"> </span><span class="hl-5">toggleButton</span><span class="hl-11">?.</span><span class="hl-0">toggle</span><span class="hl-11">()</span><span class="hl-3">}</span><span class="hl-8">&gt;</span><span class="hl-1">Toggle!</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">button</span><span class="hl-8">&gt;</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#q-sys-remote-websocket-control-for-svelte"><span>Q-<wbr/>SYS <wbr/>Remote <wbr/>Web<wbr/>Socket <wbr/>Control for <wbr/>Svelte</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#prerequisites"><span>Prerequisites</span></a></li><li><a href="#project-creation"><span>Project <wbr/>Creation</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#instantiating-the-qrwc-svelte-instance"><span>Instantiating the QRWC-<wbr/>Svelte <wbr/>Instance</span></a></li><li><a href="#checking-connection-status"><span>Checking <wbr/>Connection <wbr/>Status</span></a></li><li><a href="#using-q-sys-controls"><span>Using <wbr/>Q-<wbr/>SYS <wbr/>Controls</span></a></li><li><a href="#wrapping-up"><span>Wrapping up</span></a></li></ul></li></ul></li><li><a href="#q-sys-design-considerations"><span>Q-<wbr/>SYS <wbr/>Design <wbr/>Considerations</span></a></li><li><a href="#connection-options"><span>Connection <wbr/>Options</span></a></li><li><ul><li><a href="#core-ip-and-redundant-core-ip"><span>Core IP and <wbr/>Redundant <wbr/>Core IP</span></a></li><li><a href="#secure"><span>Secure</span></a></li><li><a href="#polling-interval"><span>Polling <wbr/>Interval</span></a></li><li><a href="#control-filter"><span>Control <wbr/>Filter</span></a></li></ul></li><li><a href="#sveltekit"><span>Svelte<wbr/>Kit</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">qrwc-svelte</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
